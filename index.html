<!DOCTYPE html>
<html ng-app="myapp" lang="en">

<head>
    <meta charset="UTF-8">
    <title>Code & Preview</title>

    <script type="text/javascript" src="scripts/layout/jquery.js"></script>
    <script type="text/javascript" src="scripts/layout/jquery-ui.js"></script>
    <script type="text/javascript" src="scripts/layout/jquery.layout.js"></script>
    <script type="text/javascript" src="scripts/layout/bootstrap.min.js"></script>

    <script>
        var less=less||{};less.async = true;
    </script>
    <script type="text/javascript" src="scripts/compilers/less.min.js"></script>
    <script type="text/javascript" src="scripts/compilers/coffee-script.min.js"></script>
    <script type="text/javascript" src="scripts/compilers/jade.min.js"></script>
    <script type="text/javascript" src="scripts/compilers/markdown.min.js"></script>
    <script type="text/javascript" src="scripts/compilers/sass.sync.min.js"></script>
    <script type="text/javascript" src="scripts/compilers/stylus.min.js"></script>

    <script type="text/javascript">
        var myLayout;

		$(document).ready(function(){

			myLayout = $('#CodeContainer').layout({
				west__minSize:	50,
				center__childOptions: {
					west__size: "50%",
                    center__size: "50%",
					center__maskContents: true
				}
				
			});
	
		});
        
         function setWidth(size){
            $('#preview').toggleClass(size);
        }
    </script>


    <script src="scripts/editor/codemirror-compressed.js"></script>
    <script src="scripts/beautify/beautify.js"></script>
    <script src="scripts/beautify/beautify-css.js"></script>
    <script src="scripts/beautify/beautify-html.js"></script>
    <script src="scripts/editor/emmet.js"></script>
    <script src="scripts/download/jszip.min.js"></script>
    <script src="scripts/download/FileSaver.min.js"></script>

    <script src="scripts/angular/angular.min.js"></script>
    <script src="scripts/angular/ui-codemirror.js"></script>
    <script src="scripts/angular/angular-local-storage.min.js"></script>

    <link rel="stylesheet" type="text/css" href="styles/bootstrap.min.css">
    <!--fonts generated using fontello
      - svgs from pictonic, octicons, font-awesome, fontelico, MFG labs, Zocial, Elusive, Web Symbols-->
    <link rel="stylesheet" type="text/css" href="styles/cnpfonts.css">
    <link rel="stylesheet" type="text/css" href="styles/cnpfonts-animation.css">
    <link rel="stylesheet" type="text/css" href="styles/editor.css">
    <link rel="stylesheet" type="text/css" href="styles/layout.css">

    <link rel="stylesheet" type="text/css" href="styles/styles.css">

</head>

<body ng-controller="appController as vm">

    <header>
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false"
                        aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">Code & Preview</a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a title="Mobile" href="" onclick="setWidth('iphone');return false;"><i class="icon-mobile"></i></a></li>
                        <li><a title="Tablet" href="" onclick="setWidth('iphone');return false;"><i class="icon-tablet"></i></a></li>
                        <li><a title="Laptop" href="" onclick="setWidth('iphone');return false;"><i class="icon-laptop"></i></a></li>
                        <li><a title="Desktop" href="" onclick="setWidth('iphone');return false;"><i class="icon-desktop"></i></a></li>
                        <li><a title="Preview Window" href="" ng-click="vm.previewWindow();"><i class="icon-link-ext"></i></a></li>
                        <li><a title="Download" href="" ng-click="vm.downloadZip();"><i class="icon-download"></i></a></li>
                    </ul>
                </div>
                <!--/.nav-collapse -->
            </div>
        </nav>
    </header>

    <div id="CodeContainer">

        <div class="ui-layout-west">
            <div ng-repeat="file in vm.files" ng-switch on="file.ext">
                <div class="active" ng-switch-when="html" ng-mouseover="vm.hoverItem[$index] = true" ng-mouseleave="vm.hoverItem[$index] = false">
                    <i class="html icon-html5-01"></i><a href="" ng-click="vm.setEditorValue(file)">{{file.name}}</a>
                    <div class="pull-right" ng-show="vm.hoverItem[$index]">
                        <i class="edit icon-pencil"></i><i class="delete icon-cancel"></i>
                    </div>
                </div>
                <div ng-switch-when="js">
                    <i class="js icon-prog-js02"></i><a href="" ng-click="vm.setEditorValue(file)">{{file.name}}</a>
                </div>
                <div ng-switch-when="css">
                    <i class="css icon-css3-01"></i><a href="" ng-click="vm.setEditorValue(file)">{{file.name}}</a>
                </div>
                <div ng-switch-when="less">
                    <i class="less icon-css3-01"></i><a href="" ng-click="vm.setEditorValue(file)">{{file.name}}</a>
                </div>
                <div ng-switch-when="sass">
                    <i class="sass icon-css3-01"></i><a href="" ng-click="vm.setEditorValue(file)">{{file.name}}</a>
                </div>
                <div ng-switch-when="scss">
                    <i class="scss icon-css3-01"></i><a href="" ng-click="vm.setEditorValue(file)">{{file.name}}</a>
                </div>
                <div ng-switch-when="coffee">
                    <i class="coffee icon-prog-coffeescr"></i><a href="" ng-click="vm.setEditorValue(file)">{{file.name}}</a>
                </div>
                <div ng-switch-when="md">
                    <i class="md icon-markdown"></i><a href="" ng-click="vm.setEditorValue(file)">{{file.name}}</a>
                </div>
                <div ng-switch-when="markdown">
                    <i class="markdown icon-markdown"></i><a href="" ng-click="vm.setEditorValue(file)">{{file.name}}</a>
                </div>
                <div ng-switch-when="jade">
                    <i class="jade icon-html5-01"></i><a href="" ng-click="vm.setEditorValue(file)">{{file.name}}</a>
                </div>
                <div ng-switch-when="styl">
                    <i class="styl icon-css3-01"></i><a href="" ng-click="vm.setEditorValue(file)">{{file.name}}</a>
                </div>
            </div>
            <br/>
            <div>
                <input type="text" ng-model="vm.newFile" ng-show="vm.addNew">
                <a href="" ng-click="vm.addNewFile(vm.newFile)" ng-show="vm.addNew">Save</a>
                <a href="" ng-click="vm.addNew = true;" ng-hide="vm.addNew"><i class="icon-plus-squared"></i> New File</a>
            </div>
        </div>

        <div class="ui-layout-center">
            <div class="ui-layout-west">
                <div class="editor">
                    <textarea ui-codemirror="{ onLoad : vm.codemirrorLoaded }" ui-codemirror-opts="vm.editorOptions" id="htmlTxt" ng-model="vm.dynFile.value"
                        ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 500, 'blur': 0 } }"></textarea>
                </div>
            </div>
            <div id="prevCenter" class="ui-layout-center">
                <div class="previewer">
                    <iframe class="previewer-iframe" src="about:blank" compile="vm.dynFile.value" id="preview" width="100%" height="100%" scrolling="auto"
                        frameborder="0"></iframe>
                </div>
            </div>
        </div>

    </div>
    
    
    <script type="text/javascript" src="scripts/app.js"></script>
    <script type="text/javascript" src="scripts/compile.service.js"></script>
    <script type="text/javascript" src="scripts/compile.directive.js"></script>
    <script type="text/javascript" src="scripts/app.controller.js"></script>
</body>

</html>